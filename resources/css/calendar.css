/* FullCalendar Custom Styling - Following style_guide.md */

/* Override FullCalendar default styles */
.fc {
    font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* Calendar table styling */
.fc .fc-scrollgrid {
    border-color: #E0E0E0 !important;
}

.fc .fc-scrollgrid td,
.fc .fc-scrollgrid th {
    border-color: #E0E0E0 !important;
}

/* Day headers */
.fc .fc-col-header-cell {
    background-color: #F5F5F5 !important;
    border-color: #E0E0E0 !important;
    padding: 12px !important;
}

.fc .fc-col-header-cell-cushion {
    color: #6D6D6D !important;
    font-size: 14px !important;
    font-weight: 600 !important;
    text-decoration: none !important;
}

/* Day cells */
.fc .fc-daygrid-day {
    background-color: #FFFFFF !important;
    transition: background-color 150ms ease-in-out;
    cursor: pointer;
}

.fc .fc-daygrid-day:hover {
    background-color: #FAFAFA !important;
}

.fc .fc-daygrid-day-number {
    color: #1F1F1F !important;
    font-size: 14px !important;
    padding: 8px !important;
    text-decoration: none !important;
}

/* Today highlighting */
.fc .fc-day-today {
    background-color: #EEF2FF !important;
}

.fc .fc-day-today .fc-daygrid-day-number {
    color: #2563EB !important;
    font-weight: 600 !important;
}

/* Other month days (grayed out) */
.fc .fc-day-other .fc-daygrid-day-number {
    color: #C0C0C0 !important;
}

/* Events */
.fc-event {
    border-radius: 4px !important;
    padding: 2px 4px !important;
    font-size: 12px !important;
    border: none !important;
    margin-bottom: 2px !important;
    cursor: pointer !important;
    transition: all 150ms ease-in-out !important;
}

.fc-event:hover {
    filter: brightness(0.9) !important;
}

.fc-event-title {
    font-weight: 500 !important;
    color: #FFFFFF !important;
}

/* ========================================
   Month View (dayGridMonth) - Show frame title, hide slots
   Standard horizontal layout (reset any time grid styles)
   ======================================== */

/* Color cells that have events */
.fc-dayGridMonth-view .fc-daygrid-day:has(.fc-event) {
    background-color: #DBEAFE !important;
}

.fc-dayGridMonth-view .fc-daygrid-day:has(.fc-event):hover {
    background-color: #BFDBFE !important;
}

/* Today with events */
.fc-dayGridMonth-view .fc-day-today:has(.fc-event) {
    background-color: #C7D2FE !important;
}

/* Hide slot events in month view */
.fc-dayGridMonth-view .event-slot {
    display: none !important;
}

/* Style frame events in month view - standard horizontal display */
.fc-dayGridMonth-view .event-frame {
    background-color: #2563EB !important;
    border-radius: 4px !important;
    padding: 2px 6px !important;
    margin: 1px 2px !important;
    font-size: 11px !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    /* Reset any time grid positioning */
    position: relative !important;
    left: auto !important;
    width: auto !important;
    inset-inline-start: auto !important;
}

/* Reset vertical text styles for month view */
.fc-dayGridMonth-view .event-frame .fc-event-main {
    writing-mode: horizontal-tb !important;
    text-orientation: mixed !important;
    transform: none !important;
    display: block !important;
    padding: 0 !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

.fc-dayGridMonth-view .event-frame .fc-event-title {
    color: #FFFFFF !important;
    font-weight: 500 !important;
    text-align: left !important;
}

/* Show time in month view if needed */
.fc-dayGridMonth-view .event-frame .fc-event-time {
    display: none !important;
}

/* Time grid (week/day view) - Clean view with hidden grid lines */
.fc .fc-timegrid-slot {
    height: 48px !important;
    border-color: transparent !important; /* Hide horizontal lines */
}

.fc .fc-timegrid-slot-minor {
    border-top-style: none !important; /* Hide minor slot lines */
    border-color: transparent !important;
}

/* Show time labels */
.fc .fc-timegrid-slot-label {
    border-color: transparent !important;
    font-size: 11px !important;
    color: #6D6D6D !important;
    vertical-align: top !important;
    padding-top: 0 !important;
}

.fc .fc-timegrid-slot-label-cushion {
    padding: 0 4px !important;
    position: relative;
    top: -6px;
}

.fc .fc-timegrid-axis {
    border-color: transparent !important;
    width: 60px !important;
}

/* Time grid columns */
.fc .fc-timegrid-col {
    border-color: #E0E0E0 !important; /* Keep vertical day separators */
}

/* Hide all horizontal time lines */
.fc .fc-timegrid-slots tr {
    border-color: transparent !important;
}

.fc .fc-timegrid-divider {
    display: none !important;
}

/* Time grid events - Google Calendar style */
.fc-timegrid-event {
    border-radius: 4px !important;
    border: none !important;
    box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.1) !important;
}

.fc-timegrid-event .fc-event-time {
    color: #1F1F1F !important;
    font-size: 11px !important;
    font-weight: 600 !important;
}

.fc-timegrid-event .fc-event-title {
    font-size: 12px !important;
    font-weight: 500 !important;
}

.fc-timegrid-event .fc-event-main {
    padding: 4px 6px !important;
}

/* All-day slot styling */
.fc .fc-timegrid-axis-cushion {
    font-size: 11px !important;
    color: #6D6D6D !important;
}

.fc .fc-timegrid-slot-label-frame {
    text-align: center !important;
}

/* Add subtle background to make time slots visible without grid */
.fc .fc-timegrid-body {
    background-color: #FAFAFA !important;
}

/* Ensure event times are visible on events */
.fc-timegrid-event .fc-event-time {
    display: block !important;
    font-size: 11px !important;
    font-weight: 600 !important;
    margin-bottom: 2px !important;
}

/* Hide time for frame events */
.fc-timegrid-event.event-frame .fc-event-time {
    display: none !important;
}

/* Multi-month year view - Compact and proportional */
.fc-multimonth {
    border-color: #E0E0E0 !important;
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)) !important;
    gap: 16px !important;
    padding: 8px !important;
}

.fc-multimonth-month {
    margin-bottom: 0 !important;
    border-radius: 8px !important;
    overflow: hidden !important;
    box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.05) !important;
}

.fc-multimonth-title {
    background-color: #F5F5F5 !important;
    color: #1F1F1F !important;
    font-size: 14px !important;
    font-weight: 600 !important;
    padding: 8px 12px !important;
    border-color: #E0E0E0 !important;
    text-align: center !important;
}

.fc-multimonth-daygrid {
    border-color: #E0E0E0 !important;
}

.fc-multimonth .fc-col-header-cell {
    padding: 6px 2px !important;
    background-color: #FAFAFA !important;
}

.fc-multimonth .fc-col-header-cell-cushion {
    font-size: 10px !important;
    font-weight: 600 !important;
    color: #6D6D6D !important;
}

.fc-multimonth .fc-daygrid-day {
    cursor: pointer;
    min-height: 24px !important;
    max-height: 28px !important;
    padding: 2px !important;
}

.fc-multimonth .fc-daygrid-day:hover {
    background-color: #FAFAFA !important;
}

.fc-multimonth .fc-daygrid-day-number {
    font-size: 11px !important;
    padding: 2px !important;
}

.fc-multimonth .fc-daygrid-day-top {
    display: flex;
    justify-content: center;
    align-items: center;
}

.fc-multimonth .fc-daygrid-day-frame {
    min-height: 24px !important;
    height: 24px !important;
}

/* Year view: Hide events but color cells with events */
.fc-multimonth .fc-daygrid-day-events {
    display: none !important; /* Hide the events container completely */
}

/* Color cells that have events using :has() selector */
.fc-multimonth .fc-daygrid-day:has(.fc-event) {
    background-color: #DBEAFE !important; /* Light blue for dates with events */
}

.fc-multimonth .fc-daygrid-day:has(.fc-event):hover {
    background-color: #BFDBFE !important; /* Slightly darker on hover */
}

/* Keep today highlighting but blend with event color */
.fc-multimonth .fc-day-today:has(.fc-event) {
    background-color: #C7D2FE !important; /* Blend of today and event colors */
}

/* Reduce vertical spacing in year view table */
.fc-multimonth .fc-scrollgrid-sync-table {
    height: auto !important;
}

.fc-multimonth tbody tr {
    height: 24px !important;
}

/* More link (when too many events) */
.fc .fc-more-link {
    color: #2563EB !important;
    font-size: 12px !important;
    font-weight: 500 !important;
    text-decoration: none !important;
}

.fc .fc-more-link:hover {
    color: #1E4FCC !important;
    text-decoration: underline !important;
}

/* Popover for "more" events */
.fc .fc-popover {
    background-color: #FFFFFF !important;
    border: 1px solid #E0E0E0 !important;
    border-radius: 8px !important;
    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.08) !important;
}

.fc .fc-popover-header {
    background-color: #F5F5F5 !important;
    padding: 8px 12px !important;
    border-radius: 8px 8px 0 0 !important;
}

.fc .fc-popover-title {
    color: #1F1F1F !important;
    font-size: 14px !important;
    font-weight: 600 !important;
}

.fc .fc-popover-close {
    color: #6D6D6D !important;
    font-size: 18px !important;
    cursor: pointer !important;
}

/* Popover event text color - black on white background */
.fc .fc-popover .fc-event-title {
    color: #1F1F1F !important;
}

.fc .fc-popover .fc-event-time {
    color: #1F1F1F !important;
}

/* Now indicator (current time line in week/day view) */
.fc .fc-timegrid-now-indicator-line {
    border-color: #2563EB !important;
    border-width: 2px !important;
}

.fc .fc-timegrid-now-indicator-arrow {
    border-color: #2563EB !important;
}

/* Scrollbar styling for time grid */
.fc-scroller::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

.fc-scroller::-webkit-scrollbar-track {
    background: #FAFAFA;
    border-radius: 4px;
}

.fc-scroller::-webkit-scrollbar-thumb {
    background: #C0C0C0;
    border-radius: 4px;
}

.fc-scroller::-webkit-scrollbar-thumb:hover {
    background: #A0A0A0;
}

/* Remove default focus outline */
.fc-event:focus {
    outline: none !important;
    box-shadow: 0 0 0 2px #2563EB40 !important;
}

/* Active/Inactive event colors (already set in component, but add hover states) */
.fc-event[data-status="active"] {
    background-color: #2563EB !important;
}

.fc-event[data-status="active"]:hover {
    background-color: #1E4FCC !important;
}

.fc-event[data-status="inactive"] {
    background-color: #6D6D6D !important;
}

.fc-event[data-status="inactive"]:hover {
    background-color: #5D5D5D !important;
}

/* Week number column */
.fc .fc-daygrid-week-number {
    color: #6D6D6D !important;
    background-color: #F5F5F5 !important;
    font-size: 12px !important;
    padding: 8px !important;
}

/* Ensure proper spacing and alignment */
.fc-daygrid-day-frame {
    min-height: 100px !important;
}

.fc-daygrid-day-events {
    margin-top: 4px !important;
}

/* Selection styling (when selecting time slots) */
.fc-highlight {
    background-color: #EEF2FF !important;
    opacity: 0.5 !important;
}

/* Dragging feedback */
.fc-event-dragging {
    opacity: 0.7 !important;
    cursor: move !important;
}

.fc-event-resizing {
    opacity: 0.7 !important;
}

/* Mirror event (ghost during drag) */
.fc-event-mirror {
    opacity: 0.5 !important;
    filter: brightness(1.1) !important;
}

/* Resize handles */
.fc-event-resizer {
    display: block !important;
    width: 100% !important;
    height: 8px !important;
    position: absolute !important;
    z-index: 4 !important;
}

.fc-event-resizer-start {
    cursor: n-resize !important;
    top: 0 !important;
}

.fc-event-resizer-end {
    cursor: s-resize !important;
    bottom: 0 !important;
}

.fc-event:hover .fc-event-resizer {
    background-color: rgba(255, 255, 255, 0.3) !important;
}

/* ========================================
   Booked Slot Styles
   Display appointment nested inside slot
   ======================================== */

/* Nested appointment container inside booked slot - visitor name only */
.slot-appointment {
    background-color: #FFFFFF !important;
    border: 1px solid #A7F3D0 !important;
    border-radius: 3px !important;
    padding: 2px 6px !important;
    margin: 0 3px 3px 3px !important;
    cursor: pointer !important;
    transition: all 150ms ease-in-out !important;
    overflow: hidden !important;
    white-space: nowrap !important;
    text-overflow: ellipsis !important;
    font-size: 11px !important;
    font-weight: 500 !important;
    color: #1F1F1F !important;
    line-height: 1.4 !important;
}

.slot-appointment:hover {
    background-color: #F0FDF4 !important;
    border-color: #6EE7B7 !important;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) !important;
}

/* Booked slot - position appointment right below time */
.event-slot.slot-booked .fc-event-main {
    display: flex !important;
    flex-direction: column !important;
    justify-content: flex-start !important;
    padding: 0 !important;
    height: 100% !important;
    gap: 0 !important;
}

/* Booked slot base styling */
.event-slot.slot-booked {
    cursor: pointer !important;
}

/* Dimmed slots (frame is inactive) */
.event-slot.slot-dimmed {
    opacity: 0.5 !important;
    cursor: not-allowed !important;
}

.event-slot.slot-dimmed:hover {
    filter: none !important;
}

.event-slot.slot-dimmed .slot-appointment {
    pointer-events: none !important;
}

/* =======================================================
   FIX: Booked Slot Layout (Compact Mode)
   Forces the white card to sit directly below the time
   ======================================================= */

/* 1. Target the Flex Container (The Frame) */
.event-slot.slot-booked .fc-event-main-frame {
    display: flex !important;
    flex-direction: column !important;
    justify-content: flex-start !important; /* Force content to top */
    height: 20% !important;
}

/* 2. Compact the Time Element */
.event-slot.slot-booked .fc-event-time {
    flex: 0 0 auto !important;       /* Don't grow */
    height: auto !important;         /* Fit to content */
    line-height: 1.1 !important;     /* Tight line height */
    padding-bottom: 1px !important;  /* Tiny padding for visual balance */
    margin: 0 !important;            /* Remove margins */
}

/* 3. Reset the Sticky Title Wrapper */
.event-slot.slot-booked .fc-event-title-container,
.event-slot.slot-booked .fc-event-title.fc-sticky {
    position: static !important;     /* Disable sticky behavior */
    display: block !important;       /* Normal block display */
    flex: 0 1 auto !important;       /* Allow shrinking, prevent growing */
    height: auto !important;
    margin: 0 !important;
    padding: 0 !important;
    line-height: 0 !important;       /* Collapse container height */
}

/* 4. Formatting the White Card */
.event-slot.slot-booked .slot-appointment {
    margin-top: 1% !important;
    width: 90% !important;          /* Full width */
    box-sizing: border-box !important;
}